---
import siteConfig from '@/site.config'
import { screenshotUrl } from '@/util/screenshotAPI'

const {
  title,
  description,
  author,
  authorURL,
  sourceCodeProvider,
  repositoryURL,
  license,
  licenseURL,
  originalRepository,
  originalRepositoryURL,
  originalAuthor,
  originalAuthorURL,
} = siteConfig
const canonical = new URL(Astro.url.pathname, Astro.site).href
const ogImageSrc = screenshotUrl(canonical)
const ogImageAlt = `Screenshot of "${title}"`
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>
    <link rel="canonical" href={canonical} />
    <meta name="description" content={description} />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="stylesheet" href="/style.css" />

    <!-- Facebook Meta Tags -->
    <meta property="og:url" content={canonical} />
    <meta property="og:type" content="website" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={ogImageSrc} />
    <meta property="og:image:alt" content={ogImageAlt} />

    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="swithinbank" />
    <meta property="twitter:domain" content={Astro.site?.hostname} />
    <meta property="twitter:url" content={canonical} />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={ogImageSrc} />
    <meta name="twitter:image:alt" content={ogImageAlt} />

    <script is:inline>
      document.documentElement.classList.add('js')
    </script>
  </head>
  <body>
    <h1>{title}</h1>
    <p>{description}</p>
    <slot />
    <!-- prettier-ignore -->
    <footer>
      Built by <a href={authorURL}>{author}</a>.
      Released under <a href={licenseURL}>{license} License</a>.
      Source code on <a href={repositoryURL}>{sourceCodeProvider}</a>.
      Based on <a href={originalRepositoryURL}>{originalRepository}</a>
      by <a href={originalAuthorURL}>@{originalAuthor}</a>.
    </footer>
  </body>
</html>
